<!DOCTYPE html>
<html>
<head>
    <title>Test Subtraction Pattern Parsing</title>
</head>
<body>
    <h1>Test Subtraction Pattern Parsing</h1>
    <div id="results"></div>

    <!-- Load required modules -->
    <script src="../app/math-core.js"></script>
    <script src="../app/app-config.js"></script>
    <script src="../app/pattern-generators.js"></script>
    <script src="../app/pattern-analysis.js"></script>
    <script src="../app/pattern-processing.js"></script>

    <script>
        function testSubtraction() {
            const results = document.getElementById('results');
            
            try {
                console.log('Testing P(7,0)+P(5,1)-P(3,2) parsing...');
                const result = UnifiedPatternParser.parse('P(7,0)+P(5,1)-P(3,2)');
                
                results.innerHTML = `
                    <h2>✅ Success!</h2>
                    <p><strong>Pattern:</strong> P(7,0)+P(5,1)-P(3,2)</p>
                    <p><strong>Type:</strong> ${result.type}</p>
                    <p><strong>Has Subtraction:</strong> ${result.hasSubtraction}</p>
                    <p><strong>Step Count:</strong> ${result.combined.stepCount}</p>
                    <p><strong>Steps:</strong> ${result.combined.steps.map(s => s ? '1' : '0').join('')}</p>
                    <p><strong>Addition Patterns:</strong> ${result.patterns.length}</p>
                    <p><strong>Subtraction Patterns:</strong> ${result.subtractPatterns.length}</p>
                `;
                
                console.log('✅ Pattern parsing success:', result);
                
            } catch (error) {
                results.innerHTML = `
                    <h2>❌ Error!</h2>
                    <p><strong>Error:</strong> ${error.message}</p>
                    <pre>${error.stack}</pre>
                `;
                console.error('❌ Pattern parsing failed:', error);
            }
        }

        // Test after modules are loaded
        setTimeout(testSubtraction, 1000);
    </script>
</body>
</html>